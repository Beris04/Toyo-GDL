<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Gerencia</title>
<style>
body{font-family:Arial;background:#f2f4f8;padding:12px}
.card{background:#fff;padding:16px;border-radius:14px;margin-bottom:14px}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #ccc;padding:8px;font-size:14px}
th{background:#0046BE;color:#fff}
</style>
</head>
<body>

<h2>Dashboard â€“ Gerencia</h2>

<div class="card" id="resumen"></div>
<div class="card" id="tabla"></div>

<script>
if(localStorage.getItem("rol")!=="gerencia"){
  location.href="index.html";
}

const visitas = JSON.parse(localStorage.getItem("visitas") || "[]");
const hoy = new Date().toISOString().split("T")[0];

const hoyCount = visitas.filter(v=>v.fecha===hoy).length;
const semanaCount = visitas.length;

resumen.innerHTML = `
<b>Visitas hoy:</b> ${hoyCount} / 5 (${Math.round(hoyCount/5*100)}%)<br>
<b>Visitas semana:</b> ${semanaCount} / 25 (${Math.round(semanaCount/25*100)}%)
`;

let html = `
<table>
<tr>
  <th>Vendedor</th>
  <th>Cliente</th>
  <th>Fecha</th>
  <th>Hora</th>
</tr>
`;

visitas.forEach(v=>{
  html+=`
  <tr>
    <td>${v.vendedor}</td>
    <td>${v.cliente}</td>
    <td>${v.fecha}</td>
    <td>${v.hora}</td>
  </tr>
  `;
});

html+="</table>";
tabla.innerHTML = html;
</script>
</body>
</html>
